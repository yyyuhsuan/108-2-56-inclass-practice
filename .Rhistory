post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- lubridate::with_tz(Warsaw_time , tzone="Europe/Warsaw")
library(lubridate)
post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- with_tz(Warsaw_time , tzone="Europe/Warsaw")
library(lubridate)
post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- with_tz( Warsaw_time , tzone="Europe/Warsaw")
library(lubridate)
post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-ymd_hms("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- with_tz( Warsaw_time , tzone="Europe/Warsaw")
post[[5]][[3]][[26]] <- "心不在課堂上，在哪都做得到遠距。"
post[[5]][[4]][[26]] <- as.numeric(0)
post
post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-ymd_hms("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- with_tz( Warsaw_time , tzone="Europe/Warsaw")
post[[5]][[3]][[26]] <- "心不在課堂上，在哪都做得到遠距。"
post[[5]][[4]][[26]] <- as.numeric(0)
post
poem_song[c(1,135)] <- poem_songOrder[c(1,135)]
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
poem_song[c(1,135)] <- poem_songOrder[c(1,135)]
# poem_song
poem_song[c(1,135)] <- poem_songOrder[c(1,135)]
poem_song
poem_song[[c(136)]] <- poem_new
poem_song
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
list(post[[5]])
)
str(post)
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
post[[5]]
)
str(post)
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
post[["comment"]]
)
str(post)
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
post[["comments"]]
)
str(post)
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
list(post[[5]])
)
str(post)
post[[5]][[1]][[26]] <- factor("男")
install.packages("rvest")
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
post[[5]][[1]] <- factor(post[[5]][[1]])
post[[5]][[4]] <- as.numeric(post[[5]][[4]])
post
library(lubridate)
a <- ("tz=Asia/Taipei")
b <- post[[5]][[2]]
paste0(a,b)
post
post[[5]][[1]][[26]] <- factor("男")
Warsaw_time <-ymd_hms("2020-4-25 15:50:00")
post[[5]][[2]][[26]] <- with_tz( Warsaw_time , tzone="Europe/Warsaw")
post[[5]][[3]][[26]] <- "心不在課堂上，在哪都做得到遠距。"
post[[5]][[4]][[26]] <- as.numeric(0)
post
post <- list(
title=post[[1]],
content=post[[2]],
submitter=post[[3]],
category="台北大學",
dateTime=lubridate::ymd_hms("2020-04-20 14:44:00"),
list(post[[5]])
)
str(post)
sum300 <- sum(as.numeric(as.factor(receipts300)))
source("https://www.dropbox.com/s/tv16xt8mv11cli7/gujarati.R?dl=1")
print(receipts300[1:30]) # 印前30張
print(numerals_Gujarati)
sum300 <- sum(as.numeric(as.factor(receipts300)))
sum300
sum300 <- sum(as.numeric(as.factor(receipts300)))
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
print(sum300)
sum300
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
print(sum300)
sum300
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
print(sum300)
sum300
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
print(sum300)
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
sum300
numerals_Gujarati[[1]] <-"1"
numerals_Gujarati[[2]] <-"2"
numerals_Gujarati[[3]] <-"3"
numerals_Gujarati[[4]] <-"4"
numerals_Gujarati[[5]] <-"5"
numerals_Gujarati[[6]] <-"6"
numerals_Gujarati[[7]] <-"7"
numerals_Gujarati[[8]] <-"8"
numerals_Gujarati[[9]] <-"9"
receipts300 <- .randomReceipts(numerals_Gujarati)
sum300 <- sum(
as.integer(
as.character(receipts300)
)
)
sum300
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr)
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
View(poem_song)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr)
poem_song[poem_songOrder] -> poem_song
# poem_song
poem_song[poem_songOrder] -> poem_song
str(poem_song)
View(poem_song)
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
library(jsonlite); library(readr)
fromJSON("https://www.dropbox.com/s/b59ye5qoxnwhzu9/poem_song.json?dl=1", simplifyDataFrame = F) -> poem_song
fromJSON("https://www.dropbox.com/s/mjvaqdu4gufblag/poem_new.json?dl=1", simplifyDataFrame = F) -> poem_new
read.csv("https://www.dropbox.com/s/oyzvb3d05igb05e/poem_songOrder.csv?dl=1")$x -> poem_songOrder
str(poem_song)
poem_song[poem_songOrder] -> poem_song
str(poem_song)
paste0("2020年",post$comments$DateTime) -> datetime
paste0("2020年",post$comments$DateTime) -> datetime
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
as.factor(post$comments$gender) -> post$comments$gender
as.integer(post$comments$hearts) -> post$comments$hearts
# post
paste0("2020年",post$comments$DateTime) -> datetime
ymd_hm(datetime, tz="Asia/Taipei") -> post$comments$DateTime
# post
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
as.factor(post$comments$gender) -> post$comments$gender
as.integer(post$comments$hearts) -> post$comments$hearts
# post
paste0("2020年",post$comments$DateTime) -> datetime
ymd_hm(datetime, tz="Asia/Taipei") -> post$comments$DateTime
# post
paste0("2020年",post$comments$DateTime) -> datetime
ymd_hm(datetime, tz="Asia/Taipei") -> post$comments$DateTime
str(datetime)
# post
post$comments$gender[[26]] <- "男"
post$comments$DateTime[[26]] <- with_tz(ymd_hm("2020-04-25 15:50",tz="Europe/Warsaw"),tzone="Asia/Taipei")
post$comments$content[[26]] <- "心不在課堂上，在哪都做得到遠距。"
post$comments$hearts[[26]] <- 0L
# post
post$comments$gender[[26]] <- "男"
post$comments$DateTime[[26]] <- with_tz(ymd_hm("2020-04-25 15:50",tz="Europe/Warsaw"),tzone="Asia/Taipei")
post$comments$content[[26]] <- "心不在課堂上，在哪都做得到遠距。"
post$comments$hearts[[26]] <- 0L
str(post)
# post
paste0("2020年",post$comments$DateTime) -> datetime
ymd_hm(datetime, tz="Asia/Taipei") -> post$comments$DateTime
str(datetime)
# post
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
a <- "我叫"
b <- c("小明","阿美")
paste0(a,b)
source("https://www.dropbox.com/s/6pzodo4967mc9g4/dcardPost.R?dl=1")
as.factor(post$comments$gender) -> post$comments$gender
as.integer(post$comments$hearts) -> post$comments$hearts
# post
paste0("2020年",post$comments$DateTime) -> datetime
ymd_hm(datetime, tz="Asia/Taipei") -> post$comments$DateTime
str(datetime)
# post
post$comments$gender[[26]] <- "男"
post$comments$DateTime[[26]] <- with_tz(ymd_hm("2020-04-25 15:50",tz="Europe/Warsaw"),tzone="Asia/Taipei")
post$comments$content[[26]] <- "心不在課堂上，在哪都做得到遠距。"
post$comments$hearts[[26]] <- 0L
str(post)
# post
post$category <- post$category_dateTime[[1]]
post$dateTime <- ymd_hm(paste0("2020年",post$category_dateTime[[2]]),tz="Asia/Taipei")
post$category_dateTime <- NULL
post[c(1,2,3,5,6,4)] -> post
str(post)
# post
knitr::opts_chunk$set(echo = TRUE)
example <- list(
name=c("小明","小花","小新","美美"),
height=c(175,166,170,160),
weight=c(77,NA,60,43),
birthday=lubridate::ymd(c("1998-03-11","1999-12-22","1995-08-22","2001-10-10")),
hobby=c("美食 旅遊","旅遊 時尚","3C 美食","音樂 旅遊"),
residence=c("Taipei","New Taipei","Taichung","Kaohsiung"),
allowance=factor(c("0-1000","1001-2000","2000+","1001-2000")),
bloodType=c("A","B","B","O")
)
source("https://www.dropbox.com/s/qsrw069n94k61lj/transcript100to103_list.R?dl=1")
str(transcript100to103)
knitr::opts_chunk$set(echo = TRUE)
Sys.getlocale("LC_COLLATE")
knitr::opts_chunk$set(echo = TRUE)
# p=1.2的需求量
p=1.2
qd <- 10-5*p # 小心是5*p, 不能寫5p
# p=1.3的需求量
p=1.3
qd <- 10-5*p
# p=1.4的需求量
p=1.4
qd <- 10-5*p
.Last.value
# 要長久存在Global Environment要指定物件名稱（不要求與q_d同名）
demand_return(1.2) -> q_d1.2
demand_return <-
function(p){
q_d <- 10-5*p
return(q_d)
}
# 印在螢幕，但Global Environment並不會有q_d
demand_return(1.2)
# 要長久存在Global Environment要指定物件名稱（不要求與q_d同名）
demand_return(1.2) -> q_d1.2
class(demand_return)
learning_topics <-
list(
subject="函數",
date=lubridate::ymd("2020-06-03"),
functionsCreated=list(
demand=demand_return # 等號右邊是呼叫demand_return的定義值，也就是function(...){...}值定義本身。
)
)
learning_topics$functionsCreated$demand(1.2)
typeof(demand_return)
# 查詢函數執行所要求環境
environment(demand_return)
# 若函數執行需要Global environment已存在某些物件，查詢需要哪些物件
codetools::findGlobals(demand_return)
environment(demand_return)
environment(myDemand)
intercept <- 10
slope <- -5
myDemand <- function(p){
q_d <- intercept + slope*p
return(q_d)
}
environment(demand_return)
environment(myDemand)
codetools::findGlobals(demand_return)
codetools::findGlobals(myDemand)
# myDemand對Global environment的要求多了intercept及slope
myDemand2 <- function(p, intercept=10, slope=-5){
q_d <- intercept + slope*p
return(q_d)
}
environment(myDemand2)
findGlobals(myDemand2) # 不依靠global env裡的intercept/slope
myDemand2(1.2)
myDemand2(1.2, slope=-1)
myDemand2(1.2, intercept=5, slope=-1.2)
environment(myDemand2)
codetools::findGlobals(myDemand2) # 不依靠global env裡的intercept/slope
library(httr)
library(magrittr)
GET("https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/NewTaipei/916?$top=30&$format=JSON") %>%
content -> estimatedArrivalTime_916
GET("https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/NewTaipei/939?$top=30&$format=JSON") %>%
content -> route_916
library(httr)
library(magrittr)
GET("https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/NewTaipei/916?$top=30&$format=JSON") %>%
content -> estimatedArrivalTime_916
GET("https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/NewTaipei/939?$top=30&$format=JSON") %>%
content -> route_916
View(estimatedArrivalTime_916)
View(route_916)
knitr::opts_chunk$set(echo = TRUE)
if(condition){
Body for TRUE
readline(prompt = "請輸入你的學號") -> studentId
# 先執行此行輸入學號
readline(prompt = "請輸入你的學號") -> studentId
# 之後才執行以下程式
if(
str_detect(studentId,'^[43](1[01][0-9]|9[0-9])[0-9]{5}$',negate=T) # condition: 是否輸入學號正確？
) {
warning("你所輸入的學號不正確")
}
library(stringr)
# 先執行此行輸入學號
readline(prompt = "請輸入你的學號") -> studentId
# 之後才執行以下程式
if(
str_detect(studentId,'^[43](1[01][0-9]|9[0-9])[0-9]{5}$',negate=T) # condition: 是否輸入學號正確？
) {
warning("你所輸入的學號不正確")
}
# 測試
check_package("clipr")
library(clipr)
# 測試
check_package("clipr")
install.packages(clipr)
library(clipr)
# 測試
check_package("clipr")
# 測試
check_packages(c("clipr","SOAR"))
# 檢視步驟耗時elapse time
system.time(
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
)
if(!exists("weather_next36hours")){
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
SOAR::Store(weather_next36hours) # 存在.R_cache environment中
}
askSilly_weather2 <- function(locationInput,dateInput){
if(!exists("weather_next36hours")){
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
SOAR::Store(weather_next36hours) # 存在.R_cache environment中
}
(weather_next36hours$cwbopendata$dataset$location$locationName == locationInput) -> pick_location
weather_next36hours$cwbopendata$dataset$location$weatherElement[pick_location][[1]] -> weatherAtLocation
(weatherAtLocation$elementName=="MaxT") ->
pick_MaxT
(weatherAtLocation$elementName=="MinT") ->
pick_MinT
weatherAtLocation$time[pick_MaxT][[1]]$parameter$parameterName[[1]] -> maxT
weatherAtLocation$time[pick_MinT][[1]]$parameter$parameterName[[1]] -> minT
glue::glue("{locationInput} {dateInput} 氣溫，最高{maxT}度，最低{minT}度。")
}
system.time(
askSilly_weather("新北市",today())
)
askSilly_weather <- function(locationInput,dateInput){
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
(weather_next36hours$cwbopendata$dataset$location$locationName == locationInput) -> pick_location
weather_next36hours$cwbopendata$dataset$location$weatherElement[pick_location][[1]] -> weatherAtLocation
(weatherAtLocation$elementName=="MaxT") ->
pick_MaxT
(weatherAtLocation$elementName=="MinT") ->
pick_MinT
weatherAtLocation$time[pick_MaxT][[1]]$parameter$parameterName[[1]] -> maxT
weatherAtLocation$time[pick_MinT][[1]]$parameter$parameterName[[1]] -> minT
glue::glue("{locationInput} {dateInput} 氣溫，最高{maxT}度，最低{minT}度。")
}
system.time(
askSilly_weather("新北市",today())
)
i<-1
student_i_section <- examSubmissionTime$section[[i]]
jsonlite::fromJSON("https://www.dropbox.com/s/d14j5hp3i5ps657/examSubmissionTimes.json?dl=1") -> examSubmissionTime
head(examSubmissionTime$section)
head(examSubmissionTime$time)
i<-1
student_i_section <- examSubmissionTime$section[[i]]
student_i_time <- examSubmissionTime$time[[i]]
deadline <- lubridate::ymd_hms("2020-05-27 15:00:00", tz="Asia/Taipei") #
howEarly <- deadline - lubridate::ymd_hms(
student_i_time, tz="Asia/Taipei")
print(howEarly)
student_i_section <- examSubmissionTime$section[[i]]
student_i_time <- examSubmissionTime$time[[i]]
student_i_section=="56"
i<-1
student_i_section <- examSubmissionTime$section[[i]]
student_i_time <- examSubmissionTime$time[[i]]
if(student_i_section=="56"){
deadline <- lubridate::ymd_hms("2020-05-27 15:00:00", tz="Asia/Taipei")
} else {
deadline <- lubridate::ymd_hms("2020-05-27 17:00:00", tz="Asia/Taipei")
}
howEarly <- deadline - lubridate::ymd_hms(student_i_time, tz="Asia/Taipei")
print(howEarly)
